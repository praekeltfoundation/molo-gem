{% extends "base.html" %}
{% load wagtailimages_tags core_tags %}
{% block content %}
  <div class="heading">
    <h1 class=" heading__square">{{self.title}}</h1>
  </div>
  <article>
    {% for block in self.body %}
      {% if block.block_type == 'heading' %}
        <div class="heading">
          <h3 class="heading--large">{{ block.value }}</h3>
        </div>
      {% elif block.block_type == 'image' %}
        {% image block.value width-320 alt=self.title %}
      {% elif block.block_type == 'media' %}
        <div class="media-player">
          <div class="media-player__content">
            {% with block.value as media %}
              {% if is_via_freebasics %}
                <div class="media-player__no-player">
                  <span class="heading heading__subheading-alt"><h4>{{media.title}}</h4></span>
                  <a href="{{ media.youtube_link }}" target="_blank" class="media-player__icon"></a>
                  <span class="heading heading__subheading-alt">
                  <h4>{% trans "Media will be played externally in a new window" %}</h4>
                  </span>
                </div>
              {% else %}
                {% include "patterns/components/media/media-player.html" %}
              {% endif %}
            {% endwith %}
          </div>
        </div>
      {% elif block.block_type == 'numbered_list' %}
        <ol class="ordered-list">
        {% for item in block.value %}
          <li class="ordered-list__item">{{ item|handle_markdown }}</li>
        {% endfor %}
        </ol>
      {% elif block.block_type == 'list' %}
        <ul class="unordered-list">
        {% for item in block.value %}
          <li class="unordered-list__item">{{ item|handle_markdown }}</li>
        {% endfor %}
      </ul>
      {% else %}
        {{ block }}
      {% endif %}
    {% endfor %}
  </article>
{% endblock %}
