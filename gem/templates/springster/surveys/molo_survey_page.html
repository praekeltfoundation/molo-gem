{% extends 'base.html' %}
{% load wagtailcore_tags core_tags gem_tags wagtailimages_tags i18n %}

{% block content %}
    {% if self.your_words_competition %}
        <div class="gcn-competition{% if survey.your_words_competition %}{% if survey.get_effective_extra_style_hints %}  gcn-competition{{survey.get_effective_extra_style_hints}}{% endif %}{% endif %}">
            {% include "patterns/basics/surveys/surveys-modules/surveys_gcn-heading.html" with pagetype=self %}
            {% include "patterns/basics/headings/sp_variations/heading.html" with type="subheading" htmltag="p" title=pagetype.intro %}
            {% include "patterns/basics/surveys/surveys-modules/surveys_page-break.html" with surveytype="competition" surveytypeClass="surveys" %}
        </div>
    {% else %}
        <div class="surveys surveys--call-to-action">
            <div class="identity-image identity-image--survey"></div>
            {% include "patterns/basics/headings/sp_variations/heading.html" with type="component" htmltag="h1" title=self.title %}
            {% include "patterns/basics/headings/sp_variations/heading.html" with type="subheading" htmltag="h4" title=page.intro %}
            {% include "patterns/basics/surveys/surveys-modules/surveys_page-break.html" with surveytype=self surveytypeClass="surveys" %}
        </div>
    {% endif %}
    {% if user.is_authenticated and user.is_active or request.is_preview or self.allow_anonymous_submissions %}
        {% if form %}
            {% if self.your_words_competition %}
                {% include "patterns/basics/surveys/surveys-modules/form.html"  with surveytype="competition" %}
            {% else %}
                {% include "patterns/basics/surveys/surveys-modules/form.html" with surveytype="survey" %}
            {% endif %}
        {% else %}
            {% if self.your_words_competition %}
                {% include "patterns/basics/surveys/surveys-modules/surveys-feeback.html" with surveytype="competition" surveytypeClass="surveys" %}
            {% else %}
                {% include "patterns/basics/surveys/surveys-modules/surveys-feeback.html" with surveytype="survey" surveytypeClass="surveys" %}
            {% endif %}
        {% endif %}
    {% else %}
        {% if self.your_words_competition %}
            {% include "patterns/basics/surveys/surveys-modules/surveys-cta.html" with surveytype="competition" surveytypeClass="surveys" %}
        {% else %}
            {% include "patterns/basics/surveys/surveys-modules/surveys-cta.html" with surveytype="survey" surveytypeClass="surveys" %}
        {% endif %}
    {% endif %}
{% endblock %}
